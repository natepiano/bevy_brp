# Reset Mutation Test

Reset all mutation test metadata to initial state, clearing all batch numbers, test results, failure reasons, and deduplication markers.

## What This Does

Strips all test metadata and type metadata fields from all_types.json, leaving only the raw BRP data.

This removes:
- batch_number (test metadata)
- test_status (test metadata)
- fail_reason (test metadata)
- duplicate_of (type metadata - will be regenerated by prepare.py)

The result is identical to running `/create_mutation_test_json init` - a fresh file with no test history.

## Execution

```bash
python3 -c "
import json
with open('.claude/transient/all_types.json', 'r') as f:
    data = json.load(f)
# Remove test metadata fields from all types
duplicate_count = 0
for type_data in data['type_guide'].values():
    type_data.pop('batch_number', None)
    type_data.pop('test_status', None)
    type_data.pop('fail_reason', None)
    # Remove duplicate_of markers from mutation paths
    mutation_paths = type_data.get('mutation_paths', [])
    for mp in mutation_paths:
        if 'duplicate_of' in mp:
            mp.pop('duplicate_of')
            duplicate_count += 1
with open('.claude/transient/all_types.json', 'w') as f:
    json.dump(data, f, indent=2)
print(f'✓ Removed all test metadata and {duplicate_count} duplicate_of markers')
print('✓ File now contains only BRP data - deduplication will be regenerated by prepare.py')
"
```

## After Reset

The file contains only BRP data with no test metadata or deduplication markers. When you run `/mutation_test`:
1. prepare.py will automatically deduplicate mutation paths (marking 2697 duplicates)
2. prepare.py will initialize test metadata (applying auto-pass logic)
3. Testing will begin from batch 1 with 74.3% fewer operations due to deduplication
