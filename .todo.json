[
  {
    "id": "terminal_title",
    "content": "run `echo -e \"\\e]2;Implementation: Unify HandlerType and ToolHandler Architecture\\007\"` to set terminal title",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "meta_todo",
    "content": "Do not deviate from the plan - if you think you need to deviate, STOP and ask the user for guidance",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_1",
    "content": "Add BrpMethodSource enum to tool/types.rs with Static and Dynamic variants",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_1",
    "content": "Build and fix any compile errors and any compile warnings after adding BrpMethodSource",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_2",
    "content": "Update HandlerType enum in tool/types.rs to use BrpMethodSource in Brp variant",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_2",
    "content": "Build and fix any compile errors and any compile warnings after updating HandlerType enum",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_3",
    "content": "Add helper methods brp() and brp_execute() to HandlerType",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_3",
    "content": "Build and fix any compile errors and any compile warnings after adding helper methods",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_4",
    "content": "Move extract_port_from_request and extract_method_from_request functions from handler_context.rs to a location accessible by HandlerType",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_4",
    "content": "Build and fix any compile errors and any compile warnings after moving extraction functions",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_5",
    "content": "Add create_handler() method to HandlerType that creates appropriate LocalToolHandler or BrpToolHandler",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_5",
    "content": "Build and fix any compile errors and any compile warnings after adding create_handler method",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy_1",
    "content": "run `cargo clippy --workspace --all-targets --all-features -- -D warnings`",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy_fix_1",
    "content": "fix any clippy issues following rules: do not mark dead code, do not prefix unused with _, remove if not used",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_6",
    "content": "Rename ToolHandlerImpl trait to ToolHandler throughout the codebase",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_6",
    "content": "Build and fix any compile errors and any compile warnings after renaming trait",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_7",
    "content": "Update all BRP tool definitions to use HandlerType::brp(method) helper",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_7",
    "content": "Build and fix any compile errors and any compile warnings after updating BRP tool definitions",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_8",
    "content": "Update BrpExecute tool definition to use HandlerType::brp_execute() helper",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_8",
    "content": "Build and fix any compile errors and any compile warnings after updating BrpExecute tool definition",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy_2",
    "content": "run `cargo clippy --workspace --all-targets --all-features -- -D warnings`",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy_fix_2",
    "content": "fix any clippy issues following rules: do not mark dead code, do not prefix unused with _, remove if not used",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_9",
    "content": "Update service call_tool method in mcp_service.rs to use tool_def.handler.create_handler()?.call_tool().await pattern",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_9",
    "content": "Build and fix any compile errors and any compile warnings after updating service method",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_10",
    "content": "Remove TypedContext enum from handler_context.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_10",
    "content": "Build and fix any compile errors and any compile warnings after removing TypedContext",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_11",
    "content": "Remove into_typed() method from HandlerContext",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_11",
    "content": "Build and fix any compile errors and any compile warnings after removing into_typed",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_12",
    "content": "Remove into_tool_handler() method and update any imports",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_12",
    "content": "Build and fix any compile errors and any compile warnings after removing into_tool_handler",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_13",
    "content": "Remove ToolHandler enum from types.rs (keep the trait and structs)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_13",
    "content": "Build and fix any compile errors and any compile warnings after removing ToolHandler enum",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl_14",
    "content": "Update handler_context.rs to handle the removal of HandlerType::BrpExecute variant",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build_14",
    "content": "Build and fix any compile errors and any compile warnings after updating handler_context",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy_final",
    "content": "run `cargo clippy --workspace --all-targets --all-features -- -D warnings`",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy_fix_final",
    "content": "fix any clippy issues following rules: do not mark dead code, do not prefix unused with _, remove if not used",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "format",
    "content": "run `cargo +nightly fmt`",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "test",
    "content": "run `cargo nextest run`",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "test_review",
    "content": "If there are test issues, STOP and review them with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "stop_work",
    "content": "The subagent should STOP work here and return control to you",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code_review",
    "content": "Task a new subagent to do a code review of the changes - focus on identifying duplication and complexity, and validating that the implementation plan was actually implemented. Emphasize that it should only read and analyze, not modify anything.",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "review_feedback",
    "content": "When the review subagent returns, STOP and review the suggested changes with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  }
]