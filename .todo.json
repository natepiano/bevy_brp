[
  {"id": "cap1", "content": "Define capability types (NoPort, HasPort, NoMethod, HasMethod) in service/handler_context.rs", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build1", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap2", "content": "Add LocalWithPort variant to CallInfo enum in response/builder.rs", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build2", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap3", "content": "Move BrpContext struct from service/brp_context.rs to service/mod.rs", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build3", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap4", "content": "Add capability type parameters to HandlerContext struct in service/handler_context.rs", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build4", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy1", "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy1_fix", "content": "Fix all clippy issues following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap5", "content": "Add capability-based method implementations (port(), brp_method()) to HandlerContext", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build5", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap6", "content": "Add HasCallInfo implementations for each capability combination", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build6", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap7", "content": "Update ToolContext enum to include LocalWithPort variant in tool/types.rs", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build7", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap8", "content": "Update HandlerContext constructor to accept capability parameters", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build8", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy2", "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy2_fix", "content": "Fix all clippy issues following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap9", "content": "Update handler traits to use capability-typed contexts (remove port parameter from LocalToolFnWithPort)", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build9", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap10", "content": "Update ToolDef.create_handler() to create capability-based contexts", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build10", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap11", "content": "Update HandlerFn.call_handler() to handle LocalWithPort variant", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build11", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap12", "content": "Update HasFormatterConfig trait for new ToolContext variants in tool/handler_fn.rs", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build12", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy3", "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy3_fix", "content": "Fix all clippy issues following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap13", "content": "Update handler implementations in app_tools/ to remove port parameters and use ctx.port()", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build13", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap14", "content": "Delete service/local_context.rs file", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build14", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap15", "content": "Delete service/brp_context.rs file", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build15", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "cap16", "content": "Update service/mod.rs to remove old context exports and add new capability types", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "build16", "content": "Run cargo build and fix errors following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy4", "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "clippy4_fix", "content": "Fix all clippy issues following WarningRules", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "fmt", "content": "Run cargo +nightly fmt", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "test", "content": "Run cargo nextest run", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "test_check", "content": "STOP if test failures - review with user", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "subagent_stop", "content": "Subagent: STOP and return control", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "review_task", "content": "Main: Task new subagent for code review (read-only) - Focus: duplication, complexity, plan adherence", "status": "pending", "priority": "medium", "notes": ""},
  {"id": "review_discuss", "content": "Review suggestions with user", "status": "pending", "priority": "medium", "notes": ""}
]
EOF < /dev/null