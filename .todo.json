[
  {
    "id": "meta",
    "content": "Do not deviate from the plan - if you think you need to deviate, STOP and ask the user for guidance",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-1",
    "content": "Create src/response/ module directory structure",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-2",
    "content": "Build and fix any compile errors and warnings after creating directory structure",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-3",
    "content": "Create src/response/mod.rs with clean public API exports (empty stub initially)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-4",
    "content": "Build and fix any compile errors and warnings after creating mod.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-5",
    "content": "Create src/response/size_check.rs - move large response logic from src/support/large_response.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-6",
    "content": "Build and fix any compile errors and warnings after creating size_check.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-7",
    "content": "Create src/response/response.rs with Response::success/error/new methods",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-8",
    "content": "Build and fix any compile errors and warnings after creating response.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-9",
    "content": "Create src/response/builder.rs with ResponseBuilder implementation",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-10",
    "content": "Build and fix any compile errors and warnings after creating builder.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-11",
    "content": "Integrate automatic large response checking into ResponseBuilder.build()",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-12",
    "content": "Build and fix any compile errors and warnings after integrating large response checking",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-13",
    "content": "Update src/response/mod.rs to export all public APIs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-14",
    "content": "Build and fix any compile errors and warnings after updating mod.rs exports",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy1",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy1-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-1",
    "content": "Add helper methods to ExtractedParams in src/brp_tools/request_handler/traits.rs (get_entity_id, get_port, get_components, get_resource)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-2",
    "content": "Build and fix any compile errors and warnings after adding ExtractedParams helpers",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy2",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy2-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-1",
    "content": "Replace complex ResponseFormatter logic in src/tool_generator.rs with simple Response API",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-2",
    "content": "Build and fix any compile errors and warnings after updating tool_generator.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-3",
    "content": "Use ExtractedParams helper methods for field extraction in tool_generator.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-4",
    "content": "Build and fix any compile errors and warnings after using ExtractedParams helpers",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-5",
    "content": "Update BRP handlers to use unified Response API in src/brp_tools/request_handler/handler.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-6",
    "content": "Build and fix any compile errors and warnings after updating BRP handlers",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy3",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy3-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-1",
    "content": "Migrate simple local handlers batch 1 (get_trace_log_path, set_tracing_level) to use Response::success()/error()",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-2",
    "content": "Build and fix any compile errors and warnings after migrating batch 1",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-3",
    "content": "Migrate simple local handlers batch 2 (remaining simple handlers) to use Response::success()/error()",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-4",
    "content": "Build and fix any compile errors and warnings after migrating batch 2",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-5",
    "content": "Migrate complex handlers batch 1 (cleanup_logs, list_logs) to use Response::new().add_field().build()",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-6",
    "content": "Build and fix any compile errors and warnings after migrating complex batch 1",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-7",
    "content": "Migrate remaining complex handlers to use Response::new().add_field().build()",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-8",
    "content": "Build and fix any compile errors and warnings after migrating remaining complex handlers",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy4",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy4-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-1",
    "content": "Remove ResponseBuilder from src/support/response.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-2",
    "content": "Build and fix any compile errors and warnings after removing ResponseBuilder",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-3",
    "content": "Remove LocalResponseFormatter from src/support/response.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-4",
    "content": "Build and fix any compile errors and warnings after removing LocalResponseFormatter",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-5",
    "content": "Remove Response wrapper from src/brp_tools/support/response_formatter.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-6",
    "content": "Build and fix any compile errors and warnings after removing Response wrapper",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-7",
    "content": "Remove ResponseFormatter and factory pattern entirely from src/brp_tools/support/response_formatter.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-8",
    "content": "Build and fix any compile errors and warnings after removing ResponseFormatter",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-9",
    "content": "Remove now-unused src/support/large_response.rs file",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase5-10",
    "content": "Build and fix any compile errors and warnings after removing large_response.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy5",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy5-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase6-1",
    "content": "Add module-level documentation explaining unified Response API to src/response/mod.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase6-2",
    "content": "Build and fix any compile errors and warnings after adding documentation",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "format",
    "content": "Run cargo +nightly fmt",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "test",
    "content": "Run cargo nextest run",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "test-review",
    "content": "If there are test issues, STOP and review them with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code-review-subagent",
    "content": "Task a new subagent to do a code review of the changes in the worktree - tell it to focus on identifying duplication and complexity. Additionally, ask that it focus on validating that the implementation plan was actually implemented. Emphasize that it should only read and analyze, not modify anything.",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code-review-stop",
    "content": "The subagent should STOP work here and return control to you and you should then continue with reviewing the suggested changes with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  }
]