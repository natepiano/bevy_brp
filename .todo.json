[
  {
    "id": "meta-no-deviate",
    "content": "MetaTodo: Do not deviate from the plan - if you think you need to deviate, STOP and ask the user for guidance",
    "status": "pending",
    "priority": "high",
    "notes": ""
  },
  {
    "id": "impl-refactor-start-watch-task",
    "content": "Refactor start_watch_task function in src/brp_tools/watch/support/task.rs to hold lock during entire operation lifecycle (ID generation, logging setup, task spawning, and registration atomically)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build-fix-start-watch-task",
    "content": "Build and fix any compile errors and warnings after refactoring start_watch_task function",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "impl-defensive-checks",
    "content": "Add defensive checks in run_watch_connection function to verify watch exists before removal and log warnings for phantom watch removals",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "build-fix-defensive-checks",
    "content": "Build and fix any compile errors and warnings after adding defensive checks",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy-check",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy-fix",
    "content": "Fix any clippy issues (remove dead code, don't use underscore prefixes for unused variables)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "format-code",
    "content": "Run cargo +nightly fmt to format code",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "run-tests",
    "content": "Run cargo nextest run to verify tests pass",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "test-review",
    "content": "If there are test issues, STOP and review them with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code-review-prep",
    "content": "STOP work here and return control to main agent for code review coordination",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code-review-task",
    "content": "Task a new subagent to do code review of changes focusing on duplication and complexity (read-only analysis)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code-review-final",
    "content": "When code review subagent returns, STOP and review suggested changes with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  }
]