[
  {
    "id": "meta",
    "content": "Do not deviate from the plan - if you think you need to deviate, STOP and ask the user for guidance",
    "status": "pending",
    "priority": "high",
    "notes": ""
  },
  {
    "id": "phase1-1",
    "content": "Create mcp/src/response/formatter.rs and move ResponseFormatter struct and impl from brp_tools/support/response_formatter.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-2",
    "content": "Build and fix any compile errors and warnings after moving ResponseFormatter",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-3",
    "content": "Create mcp/src/response/types.rs and move FormatterDef, FormatterConfig, FormatterContext from their current locations",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-4",
    "content": "Build and fix any compile errors and warnings after moving formatter types",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-5",
    "content": "Create mcp/src/response/extractors.rs and move all field extractor functions and FieldExtractor type",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-6",
    "content": "Build and fix any compile errors and warnings after moving extractors",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-7",
    "content": "Create mcp/src/response/error.rs and move format_error_default and related error formatting functions",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-8",
    "content": "Build and fix any compile errors and warnings after moving error formatting",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-9",
    "content": "Move large_response.rs content to mcp/src/response/large_response.rs and remove duplicate from response/size_check.rs",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-10",
    "content": "Build and fix any compile errors and warnings after consolidating large response handling",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-11",
    "content": "Update mcp/src/response/mod.rs to export all moved types and functions",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase1-12",
    "content": "Build and fix any compile errors and warnings after updating module exports",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy1",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy1-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-1",
    "content": "Modify mcp/src/response/response.rs Response::success to use ResponseFormatter internally",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-2",
    "content": "Build and fix any compile errors and warnings after modifying Response::success",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-3",
    "content": "Modify mcp/src/response/response.rs Response::error to use format_error_default internally",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-4",
    "content": "Build and fix any compile errors and warnings after modifying Response::error",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-5",
    "content": "Modify mcp/src/response/response.rs Response::new to return builder that uses ResponseFormatter",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase2-6",
    "content": "Build and fix any compile errors and warnings after modifying Response::new",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy2",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy2-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-1",
    "content": "Update mcp/src/response/builder.rs ResponseBuilder to use ResponseFormatter internally",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-2",
    "content": "Build and fix any compile errors and warnings after updating ResponseBuilder",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-3",
    "content": "Remove direct CallToolResult building from ResponseBuilder, delegate to ResponseFormatter",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase3-4",
    "content": "Build and fix any compile errors and warnings after removing direct CallToolResult building",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy3",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy3-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-1",
    "content": "Update all BRP handler imports to use new mcp/src/response module locations",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-2",
    "content": "Build and fix any compile errors and warnings after updating BRP imports",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-3",
    "content": "Update all local handler imports to use new unified response API",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-4",
    "content": "Build and fix any compile errors and warnings after updating local handler imports",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-5",
    "content": "Remove old mcp/src/support/response.rs module and update any remaining references",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-6",
    "content": "Build and fix any compile errors and warnings after removing old response module",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-7",
    "content": "Update tool_definitions.rs to use new type locations from response module",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-8",
    "content": "Build and fix any compile errors and warnings after updating tool_definitions",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-9",
    "content": "Remove old mcp/src/brp_tools/support/response_formatter.rs file",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "phase4-10",
    "content": "Build and fix any compile errors and warnings after removing old formatter file",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy4",
    "content": "Run cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "clippy4-fix",
    "content": "Fix any clippy issues following our rules (remove dead code, don't use _ prefixes)",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "format",
    "content": "Run cargo +nightly fmt",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "test",
    "content": "Run cargo nextest run",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "test-review",
    "content": "If there are test issues, STOP and review them with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code-review",
    "content": "Task a new subagent to do code review focusing on duplication, complexity, and plan validation",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  },
  {
    "id": "code-review-stop",
    "content": "STOP and review the suggested changes with the user",
    "status": "pending",
    "priority": "medium",
    "notes": ""
  }
]